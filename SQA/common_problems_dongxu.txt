world1:

ATTENTION: 
Search 'Comment' in the file for information.

Only the TODO part needs your further correction. I have corrected the other problems in the world_1_tao_rui_sqa_dongxu.txt, but you have to take a look at all the comments, because some of them is important.



6. 9. can further decompose

12. Comment: It is better we do not always only change what we select. We can balance the percentage of different changes.

What is the average life expectancy in African countries that are republics?
P: Give the average life expectancy for countries in Africa which are republics?

SELECT avg(LifeExpectancy)
FROM country
WHERE Continent = "Africa" and GovernmentForm = "Republic"

S: Which countries in Africa are republics?
S: What are the life expectancies in those countries?
S: What is the average of those?

SELECT *
FROM country
WHERE Continent = "Africa" and GovernmentForm = "Republic"

SELECT LifeExpectancy
FROM country
WHERE Continent = "Africa" and GovernmentForm = "Republic"

SELECT avg(LifeExpectancy)
FROM country
WHERE Continent = "Africa" and GovernmentForm = "Republic"

18. Comment: Can further split the structure of the SQL.

What is the total number of languages used in Aruba?
P: How many languages are spoken in Aruba?

SELECT COUNT(T2.Language)
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Name = "Aruba"

S: What are the languages used in Aruba?
S: How many are there?

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Name = "Aruba"

SELECT COUNT(T2.Language)
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Name = "Aruba"

22. Comment: The SQL of the first sub-question is too complex.

How many countries speak both English and Dutch?
P: What is the number of nations that use English and Dutch?

SELECT COUNT(*)
FROM
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English"
INTERSECT
SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "Dutch")

S: What are the countries that speak both English and Dutch?
S: How many of them are there?

SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English"
INTERSECT
SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "Dutch"



24. Comment: What about further decompose this? One reason for decomposing it is that the majority of the questions are only decomposed to only 2 sub-questions; another reason is that the change is very big between the two questions.

What are the names of nations where both English and French are official languages?
P: Give the names of countries with English and French as official languages.

SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English" and T2.IsOfficial = "T"
INTERSECT
SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "French" and T2.IsOfficial = "T"

S: What are the official languages of each country?
S: Of those countries, give the names of the ones that have both English and French as official languages?

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = "T"

SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English" and T2.IsOfficial = "T"
INTERSECT
SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "French" and T2.IsOfficial = "T"


25. Comment: 1. the paraphrase is different. 2. can further decompose

What is the number of distinct continents where Chinese is spoken?
P: How many countries speak Chinese?

SELECT COUNT( DISTINCT Continent)
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "Chinese"

S: On which continents is Chinese spoken?
S: How many of them are there?

SELECT DISTINCT Continent
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "Chinese"

SELECT COUNT( DISTINCT Continent)
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "Chinese"

28. Commnet: need not use group by in the first sub-question.

Which language is the most popular on the Asian continent?
P: What is the language that is used by the largest number of Asian nations?		

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Continent = "Asia"
GROUP BY T2.Language
ORDER BY COUNT (*) DESC
LIMIT 1

S: What are all the languages used in the continent of Asia?
S: Which one is used by the largest number of Asian countries?

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Continent = "Asia"
GROUP BY T2.Language

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.Continent = "Asia"
GROUP BY T2.Language
ORDER BY COUNT (*) DESC
LIMIT 1



32. Comment: decompose

What is average life expectancy in the countries where English is not the official language?
P: Give the mean life expectancy of countries in which English is not the official language.

SELECT avg(LifeExpectancy)
FROM country
WHERE Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English" and T2.IsOfficial = "T")

S: Which countries do not have English as the official language?
S: In those countries, what is the average life expectancy?

SELECT *
FROM country
WHERE Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English" and T2.IsOfficial = "T")

SELECT avg(LifeExpectancy)
FROM country
WHERE Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.Language = "English" and T2.IsOfficial = "T")


34. Comment: add paraphrase

What is the official language spoken in the country whose head of state is Beatrix?
P: 

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.HeadOfState = "Beatrix" and T2.IsOfficial = "T"

S: Which country has a head of state named Beatrix?
S: What languages are spoken in that country?
S: Which of those languages is the official one?

SELECT * 
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.HeadOfState = "Beatrix" 

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.HeadOfState = "Beatrix" 

SELECT T2.Language
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T1.HeadOfState = "Beatrix" and T2.IsOfficial = "T"




35. Comment: add paraphrase

What is the total number of unique official languages spoken in the countries that are founded before 1930?
P: 



36. Comment: add paraphrase / decompose

What are the countries that have greater surface area than any country in Europe?
P: 



37. Comment: add paraphrase

What are the African countries that have a surface area less than any country in Asia?
P: 



38. Comment: add paraphrase; fix according to the reviewed version; Wrong max(), should be consistent(this is caused by the original labeled file)  ; Forget to add 'Asian' in the last natural language question.


Which Asian countries have a surface area that is larger than any country in Africa?

SELECT *
FROM country
WHERE Continent = "Asia"  and SurfaceArea > (SELECT max(SurfaceArea) FROM country WHERE Continent = "Africa")

S: What is the largest surface area of a country in Africa?
S: Which countries have a greater surface area than that?

SELECT max(SurfaceArea) 
FROM country 
WHERE Continent = "Africa"

SELECT *
FROM country
WHERE Continent = "Asia"  and SurfaceArea > (SELECT max(SurfaceArea) FROM country WHERE Continent = "Africa")


TODO: 
39---- 60: add the paraphrase.
42.	Which cities are in European countries where English is not the official language?
P: 

SELECT DISTINCT T2.Name
FROM country as T1 JOIN city as T2 on T2.CountryCode = T1.Code
WHERE T1.Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

S: What are the names of the countries where English is the official language?
S: What are the names of the countries in Europe that are not one of those?
S: What are the names of the cities in those countries?

SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English'

SELECT Name
FROM country 
WHERE Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

SELECT DISTINCT T2.Name
FROM country as T1 JOIN city as T2 on T2.CountryCode = T1.Code
WHERE T1.Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

42.	Comment: The second SQL can not be run. You have to check every SQL in the sqlite database even when you think it is correct.

Which cities are in European countries where English is not the official language?
P: 

SELECT DISTINCT T2.Name
FROM country as T1 JOIN city as T2 on T2.CountryCode = T1.Code
WHERE T1.Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

S: What are the names of the countries where English is the official language?
S: What are the names of the countries in Europe that are not one of those?
S: What are the names of the cities in those countries?

SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English'

SELECT Name
FROM country 
WHERE Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

SELECT DISTINCT T2.Name
FROM country as T1 JOIN city as T2 on T2.CountryCode = T1.Code
WHERE T1.Continent = 'Europe' and T1.Name NOT IN
(SELECT T1.Name
FROM country as T1 JOIN countrylanguage as T2 ON T1.Code = T2.CountryCode
WHERE T2.IsOfficial = 'T' and T2.Language = 'English')

46. Comment: decompose

Return the country name and the numbers of languages spoken for each country that speaks at least 3 languages.



48. Comment: the first SQL is illegal; the natural language has different intent from the original question and SQL ; Also change the sequence of 'government form' and 'total population'. 


Find the government form name and total populations for each country whose average life expectancy is longer than 72?
P: 

SELECT sum(Population), GovernmentForm
FROM country
GROUP BY GovernmentForm
HAVING avg(LifeExpectancy) > 72

S: Which countries have an average life expectancy greater than age 72?
S: For those, list the government form name and total population.

SELECT *
FROM country
HAVING avg(LifeExpectancy) > 72

SELECT sum(Population), GovernmentForm
FROM country
GROUP BY GovernmentForm
HAVING avg(LifeExpectancy) > 72



52. Comment: The first sub-question did not cover the 'LIMIT 3' information; 'increasing' is ASC, which is default.


What are the names of the nations with the 3 lowest populations?
P: 

SELECT Name
FROM country
ORDER BY Population ASC
LIMIT 3

S: Order the countries by increasing population.
S: Give the names of the 3 countries with the lowest.

SELECT *
FROM country
ORDER BY Population DESC
LIMIT 3

SELECT Name
FROM country
ORDER BY Population DESC
LIMIT 3



54. Comment: '(' -> '*'; surplus where. （ I know labeling is very boring, very very boring. But if you do not write it right, I have to correct it ('_`) )


What are the names of the countries that are in the continent of Europe and have a population of 80000?
P: 

SELECT Name
FROM country
where where continent = "Europe" and Population = "80000"

S: Which countries are in the continent of Europe?
S: Of those, what are the names of those that have a population of 80000?

SELECT (
FROM country
where where continent = "Europe" 

SELECT Name
FROM country
where where continent = "Europe" and Population = "80000"



59. Comment: For the first question, you should not use 'having' without a 'group by'. Again, you should test each SQL in the database. Also you can further decompose it. 

What is the total number of countries where Spanish is spoken by the largest percentage of people?
P: 

select count(*)
from (SELECT CountryCode
from countrylanguage
group by CountryCode
having Percentage = max(Percentage) and Language = "Spanish")

S: What are the country codes for countries where Spanish is spoken?
S: Of those countries, how many have Spanish as the dominant language?

SELECT CountryCode
from countrylanguage
having Language = "Spanish"

select count(*)
from (SELECT CountryCode
from countrylanguage
group by CountryCode
having Percentage = max(Percentage) and Language = "Spanish")



60.  Comment: For the first question, you should not use 'having' without a 'group by'. Again, you should test each SQL in the database. Also you can further decompose it.

What are the codes of countries where Spanish is spoken by the largest percentage of people?
P: 

SELECT CountryCode
from countrylanguage
group by CountryCode
having Percentage = max(Percentage) and Language = "Spanish"

S: What are all the country codes for countries where Spanish is spoken?
S: Of those, what are the country codes for countries that have Spanish as the dominant language?

SELECT CountryCode
from countrylanguage
having Language = "Spanish"

SELECT CountryCode
from countrylanguage
group by CountryCode
having Percentage = max(Percentage) and Language = "Spanish"




allergy_1



8. Comment: do not use group by here 

Show all allergy types and the number of allergies in each type.
P: What are the allergy types and how many allergies correspond to each one?

select allergytype, count(*)
from Allergy_type
group by allergytype

S: What are the different allergy types?
S: How many are in each category?

select allergytype
from Allergy_type
group by allergytype

select allergytype, count(*)
from Allergy_type
group by allergytype


9. Common: ASC is default, add descendingly here. 

Which allergy type has most number of allergies?
P: Which allergy type is most common?

select allergytype
from Allergy_type
group by allergytype
order by count(*) desc
limit 1

S: What are all the different allergy types?
S: Order them by number of allergies.
S: Which one has the most?

select distinct allergytype
from Allergy_type

select allergytype
from Allergy_type
group by allergytype
order by count(*) desc

select allergytype
from Allergy_type
group by allergytype
order by count(*) desc
limit 1



19. Comment: it is better do not use '21' instead of '20'. It is hard for the model to generate this SQL from natural language.

Show all student ids who are older than 20.
P: What are the student ids for students over 20 years old?

select StuID
from Student
where age > 20

S: Who is age 21 or older?
S: What are their student ids?

select *
from Student
where age > 20

select StuID
from Student
where age > 20
